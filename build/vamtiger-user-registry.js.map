{"version":3,"file":"vamtiger-user-registry.js","sources":["../source/types.ts","../source/css/document-index.ts","../source/html/index.ts","../source/css/index.ts","../source/get-template.ts","../source/config.ts","../source/close-confirmation.ts","../source/delete-user.ts","../source/handle-user.ts","../source/get-users.ts","../source/handle-footer.ts","../source/get-user.ts","../source/add-new-user.ts","../source/handle-event.ts","../source/element.ts","../source/vamtiger-user-registry.ts"],"sourcesContent":["import * as VBM from 'vamtiger-browser-method/build/types';\nimport VamtigerUserRegistry from './element';\n\nexport enum StringConstant {\n    nothing = ''\n}\n\nexport enum Selector {\n    shadowUi = '[data-vamtiger-user-listing]',\n    style = 'style',\n    user = '[data-user]',\n    footer = '[data-footer]',\n    overlay = '[data-overlay]',\n    confirmDialog = '[data-confirm-dialog]',\n    confirmDeleteDialog = '[data-confirm-delete-user]',\n    confirmAddNewUserDialog = '[data-confirm-add-new-user]',\n    cancelDialog = '[data-confirm-button-cancel]',\n    confirmButtonOkay = '[data-confirm-button-ok]',\n    addNewUserButton = '[data-action-add-user]',\n    addNewUserForm = '[data-add-new-user-form]',\n    addNewUserFormError = '[data-error]',\n    addNewUserFormInputError = 'input[data-error]',\n    layoutMarkersToggle = '[data-layout-markers-toggle]'\n}\n\nexport enum EventName {\n    connected = 'vamtiger-user-registry-connected',\n    addUser = 'vamtiger-user-registry-add-user',\n    userAdded = 'vamtiger-user-registry-user-added'\n}\n\nexport enum RequestMethod {\n    DELETE = 'DELETE',\n    GET = 'GET',\n    POST = 'POST',\n    PUT = 'PUT'\n}\n\nexport enum ObservedAttributes {\n}\n\nexport enum SlotName {\n    headerImage = 'header-image',\n    headerCapation = 'header-caption',\n    action = 'action',\n    user = 'user',\n    overlay = 'overlay',\n    footer = 'footer'\n}\n\nexport interface IGetTemplate {\n    selector: Selector;\n    attributes?: IAttributes;\n    properties?: IProperties;\n}\n\nexport interface IAttributes {\n    id?: string;\n    for?: string;\n    name?: string;\n    slot?: string;\n}\n\nexport interface IProperties {\n    innerHTML?: string;\n}\n\nexport interface IDeleteUser {\n    element: VamtigerUserRegistry;\n    userElement?: HTMLElement;\n}\n\nexport interface ICloseConfirmation {\n    element: VamtigerUserRegistry;\n}\n\nexport interface IUserRegistryElementDataset extends DOMStringMap{\n    connected?: string;\n    getUsersUrl?: string;\n    getUserUrl?: string;\n    getUsersError?: string;\n    getAllUsers?: string;\n    deleteUserUrl?: string;\n    addNewUserUrl?: string;\n    handleUserTimeot?: string;\n    hover?: string;\n    confirm?: 'Delete user' | 'Add new user';\n    layoutMarkers?: string;\n    testMode?: string;\n    error?: string;\n    defaultErrorMessage?: string;\n}\n\nexport interface IHandleFooter {\n    element: VamtigerUserRegistry;\n    mutationLisit: MutationRecord[];\n    observer: MutationObserver;\n}\n\nexport interface IParams {\n    getUsersUrl: string;\n    getUserUrl: string;\n    getUsersNextPageUrl?: string;\n    getAllUsers?: boolean;\n\n    deleteUserUrl: string;\n\n    addNewUserUrl: string;\n\n    handleUserTimeout: number;\n\n    layoutMarkers: boolean;\n    testMode: boolean;\n}\n\nexport interface IUserRegistryElement extends HTMLElement {\n    dataset: UserRegistryElementDataset;\n}\n\nexport interface IGetUsers {\n    element: VamtigerUserRegistry;\n}\n\nexport interface IGetUser {\n    element: VamtigerUserRegistry;\n    userId: number;\n}\n\nexport interface IUser {\n    id: number;\n    name: string;\n    surname: string;\n    email: string;\n    position: string;\n}\n\nexport interface IGetUserSuccessResponse {\n    result: 'successful',\n    message: 'retrieved user(s)',\n    data: {\n        user: IUser\n    }\n}\n\nexport interface IGetUserFailedResponse {\n    result: \"failed\",\n    message: \"retrieved user(s) failed\",\n    data: {\n        user: number;\n    }\n}\n\nexport interface IResponseBase {\n    result: 'successful' | 'failed' | 'error';\n    message: string;\n}\n\nexport interface IUsersResponse extends IResponseBase {\n    data: {\n        users: {\n            current_page: number;\n            from: number;\n            last_page: number;\n            per_page: number;\n            to: number;\n            total: number;\n\n            first_page_url: string;\n            last_page_url: string;\n            next_page_url: string;\n            path: string;\n            prev_page_url: string | null;\n\n            data: IUser[]\n        }\n    }\n}\n\nexport interface IDeleteUserResponse extends IResponseBase {\n    data: {\n        user: number;\n        delete: number;\n    }\n}\n\nexport interface IAddNewUserSuccessResponse {\n    result: 'successful';\n    message: 'added new user',\n    data: {\n        user: number\n    }\n}\n\nexport interface IAddNewUserFailedResponse {\n    result: 'failed';\n    message: 'failed to add new user',\n    data: {\n        [key: string]: {\n            error: string;\n            errorDescription?: string;\n        }[]\n    }\n}\n\nexport interface IHandleUser {\n    element: VamtigerUserRegistry;\n    user: IUser;\n}\n\nexport interface IAddNewUser {\n    element: VamtigerUserRegistry;\n}\n\nexport interface IAddUserEventMessage extends CustomEventInit {\n    user?: IUser;\n}\n\nexport interface IHandleEvent {\n    element: VamtigerUserRegistry;\n    event: CustomEventInit<IAddUserEventMessage>\n}\n\ntype UserRegistryElementDataset = {[K in keyof IUserRegistryElementDataset]: IUserRegistryElementDataset[K]};\n\nexport type AttributesKey = keyof IAttributes;\n\nexport type ObservedAttribute = keyof typeof ObservedAttributes;\n\nexport type AddNewUserResponse = IResponseBase\n    & (IAddNewUserSuccessResponse | IAddNewUserFailedResponse);\n\nexport type GetNewUserResponse = IResponseBase\n    & (IGetUserSuccessResponse | IGetUserFailedResponse)\n\nexport type GetTemplate<P extends IGetTemplate> =\n    P['selector'] extends Selector.style ? HTMLStyleElement :\n    P['selector'] extends Selector.addNewUserButton ? HTMLButtonElement :\n    P['selector'] extends Selector.confirmDialog\n        | Selector.shadowUi\n        | Selector.user\n        | Selector.confirmDeleteDialog\n        | Selector.confirmAddNewUserDialog\n        ? HTMLDivElement :\n    null;","export default `vamtiger-user-registry button,vamtiger-user-registry fieldset,vamtiger-user-registry form,vamtiger-user-registry input,vamtiger-user-registry label{margin:nonne;padding:none;border:none;outline:none;-webkit-appearance:none}vamtiger-user-registry button{cursor:pointer}@-webkit-keyframes a{0%{opacity:0;visibility:hidden}to{opacity:1;visibility:visible}}@keyframes a{0%{opacity:0;visibility:hidden}to{opacity:1;visibility:visible}}@-webkit-keyframes b{0%{top:2em;opacity:0}to{top:0;opacity:1}}@keyframes b{0%{top:2em;opacity:0}to{top:0;opacity:1}}vamtiger-user-registry{opacity:0}vamtiger-user-registry [data-button],vamtiger-user-registry form input,vamtiger-user-registry form label{cursor:pointer}vamtiger-user-registry [data-display-grid]{display:grid}vamtiger-user-registry [data-position-relative]{position:relative}vamtiger-user-registry [slot=user]{position:relative;overflow:hidden}vamtiger-user-registry [slot=user] *{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}vamtiger-user-registry [slot=user]:nth-child(odd){background-color:#d3d3d3}vamtiger-user-registry [slot=user]:nth-child(2n),vamtiger-user-registry [slot=user] [data-delete]{background-color:#fff}vamtiger-user-registry [slot=user] [data-delete]{display:grid;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:absolute;height:100%;width:2em;top:0;right:-2em;-webkit-transition:right 235ms;transition:right 235ms;color:red;font-size:1.5em;pointer-events:none}vamtiger-user-registry [slot=user][data-hover] [data-delete]{right:0}vamtiger-user-registry [slot=overlay]{visibility:hidden;position:relative;grid-row:1;grid-column:1}vamtiger-user-registry [slot=overlay] [data-confirm-header]{font-size:1.5em}vamtiger-user-registry [slot=overlay] [data-confirm-body]{font-size:1.1em;margin-bottom:1em}vamtiger-user-registry [slot=overlay] [data-header-underline]{height:1px;background-color:#d3d3d3}vamtiger-user-registry [slot=overlay] [data-confirm-footer]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}vamtiger-user-registry [slot=overlay] [data-confirm-footer] [data-confirm-button]{display:grid;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:8em;height:3.4em}vamtiger-user-registry [slot=overlay] [data-confirm-footer] [data-confirm-button][data-confirm-button-ok]{color:#fff;background-color:#000}vamtiger-user-registry [slot=overlay] [data-confirm-footer] [data-confirm-button][data-confirm-button-cancel]{color:gray;background-color:#fff}vamtiger-user-registry [slot=overlay] [data-confirm-footer] [data-confirm-button]:hover{-webkit-filter:inver(1);filter:inver(1)}vamtiger-user-registry [slot=overlay] [data-confirm-footer] [data-confirm-button]:nth-child(n+2){margin-right:1em}vamtiger-user-registry input{border:1px solid #000}vamtiger-user-registry [data-confirm-body] [data-confirm-input-form]{grid-row-gap:1em}vamtiger-user-registry [data-confirm-body] [data-confirm-input-form] [form-group]{display:grid;grid-row-gap:.5em;position:relative;grid-auto-rows:minmax(1.2em,auto)}vamtiger-user-registry [data-confirm-body] [data-confirm-input-form] [form-group] input{padding:.4em;font-size:1em}vamtiger-user-registry [data-confirm-body] [data-confirm-input-form] [form-group] input[data-error]~[data-error]:after{display:inline-block;content:attr(data-error);font-size:.8em;color:red}vamtiger-user-registry[data-connected]{-webkit-animation:a 387ms linear forwards;animation:a 387ms linear forwards\n\n    /* & [slot=\"user\"]\n    {\n        animation: var(--vamtiger-user-listing-fade-in-animation);\n    } */}vamtiger-user-registry[data-confirm] [slot=overlay]{-webkit-animation:b 135ms;animation:b 135ms}vamtiger-user-registry[data-confirm=\"Add new user\"] [data-confirm-add-new-user],vamtiger-user-registry[data-confirm=\"Delete user\"] [data-confirm-delete-user]{visibility:visible}vamtiger-user-registry[data-test-mode] [data-confirm-button-ok]{visibility:none;cursor:not-allowed}\n/* layout markers*/vamtiger-user-registry[data-layout-markers] [slot=overlay]>:nth-child(odd){background-color:#b0c4de}vamtiger-user-registry[data-layout-markers] [slot=overlay]>:nth-child(2n){background-color:#d3d3d3}vamtiger-user-registry[data-layout-markers] [slot=overlay] [data-add-new-user-form]>:nth-of-type(odd){background-color:#ffb6c1}vamtiger-user-registry[data-layout-markers] [slot=overlay] [data-add-new-user-form]>:nth-of-type(odd)>:nth-of-type(odd){background-color:#90ee90}vamtiger-user-registry[data-layout-markers] [slot=overlay] [data-add-new-user-form]>:nth-of-type(2n){background-color:#008b8b}vamtiger-user-registry[data-layout-markers] [slot=overlay] [data-add-new-user-form]>:nth-of-type(2n)>:nth-of-type(odd){background-color:#d3d3d3}\n/*# sourceMappingURL=document-index.ts.map */`;","export default `<div slot=\"overlay\" data-confirm-dialog data-confirm-add-new-user> <div data-confirm-header> Add new user </div> <div data-header-underline></div> <div data-confirm-body data-display-grid> <form data-add-new-user-form data-confirm-input-form data-display-grid> <div form-group> <label for=\"addNewUserNameInput\"> Name </label> <input id=\"addNewUserNameInput\" name=\"name\"> <span data-error></span> </div> <div form-group> <label for=\"addNewUserSurnameInput\"> Surname </label> <input id=\"addNewUserSurnameInput\" name=\"surname\"> <span data-error></span> </div> <div form-group> <label for=\"addNewUserEmailInput\"> Email </label> <input type=\"email\" id=\"addNewUserEmailInput\" name=\"email\"> <span data-error></span> </div> <div form-group> <label for=\"addNewUserPositionInput\"> Position </label> <input id=\"addNewUserPositionInput\" name=\"position\"> <span data-error data-default-error-message=\"Please enter your current position\"></span> </div> </form> </div> <div data-confirm-footer> <button data-confirm-button data-confirm-button-ok> <span>Confirm</span> </button> <button data-confirm-button data-confirm-button-cancel> <span>Cancel</span> </button> </div> </div> <div slot=\"overlay\" data-confirm-dialog data-confirm-delete-user> <div data-confirm-header> Confirm delete </div> <div data-header-underline></div> <div data-confirm-body> <span> Please confirm that you would like to delete this user. </span> </div> <div data-confirm-footer> <button data-confirm-button data-confirm-button-ok> <span>Confirm</span> </button> <button data-confirm-button data-confirm-button-cancel> <span>Cancel</span> </button> </div> </div> <button slot=\"action\" data-action-add-user>Add new user</button> <div data-user data-button></div> <div data-vamtiger-user-listing> <div data-test-mode> <span data-title> test mode </span> <div data-separator></div> <div data-layout-markers-controls> <span data-label> layout markers </span> <div data-layout-markers-toggle></div> </div> </div> <div data-header> <div data-header-overlay></div> <figure data-header-image> <slot name=\"header-image\"></slot> </figure> <div data-header-caption> <slot name=\"header-caption\"></slot> </div> </div> <div data-body> <div data-left-side-bar></div> <div data-user-listing> <div data-action> <slot name=\"action\"></slot> </div> <div data-users> <slot name=\"user\"></slot> </div> </div> <div data-right-side-bar></div> </div> <div data-footer> <a data-backend>Laravel</a> <span data-separator></span> <a data-frontend>Web Components</a> </div> <div data-overlay> <slot name=\"overlay\"></slot> </div> </div>`;","export default `@-webkit-keyframes a{0%{opacity:0;visibility:hidden}to{opacity:1;visibility:visible}}@keyframes a{0%{opacity:0;visibility:hidden}to{opacity:1;visibility:visible}}:host{display:inline-block;position:relative;-ms-touch-action:manipulation;touch-action:manipulation;-webkit-tap-highlight-color:transparent;opacity:0}:host a,:host button,:host figure,:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{margin:0;padding:0;border:none;outline:none;-webkit-appearance:none;text-decoration:none}:host [data-vamtiger-user-listing]{height:100%;position:relative;display:grid;grid-template-rows:300px 3fr 50px}:host [data-vamtiger-user-listing] [data-test-mode]{position:fixed;top:0;left:0;z-index:4;display:grid;grid-gap:.5em;padding:1em;font-size:1em;text-transform:uppercase;background-color:#fff;visibility:hidden}:host [data-vamtiger-user-listing] [data-test-mode] [data-separator]{height:1px;background-color:#d3d3d3}:host [data-vamtiger-user-listing] [data-test-mode] [data-layout-markers-controls]{display:grid;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;grid-gap:1em}:host [data-vamtiger-user-listing] [data-test-mode] [data-layout-markers-controls] [data-layout-markers-toggle]{height:1em;display:grid;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;position:relative}:host [data-vamtiger-user-listing] [data-test-mode] [data-layout-markers-controls] [data-layout-markers-toggle]:after,:host [data-vamtiger-user-listing] [data-test-mode] [data-layout-markers-controls] [data-layout-markers-toggle]:before{display:inline-block;content:\"\";height:100%;grid-column:1;grid-row:1}:host [data-vamtiger-user-listing] [data-test-mode] [data-layout-markers-controls] [data-layout-markers-toggle]:before{background-color:#ffa07a;-webkit-transition:background-color 75ms;transition:background-color 75ms;width:2.5em;border-radius:1em}:host [data-vamtiger-user-listing] [data-test-mode] [data-layout-markers-controls] [data-layout-markers-toggle]:after{background-color:#d3d3d3;width:1em;border-radius:100%;border:1px solid #a9a9a9;-webkit-transform:scale(1.4);transform:scale(1.4);-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;left:0;-webkit-transition:left 75ms;transition:left 75ms}:host [data-vamtiger-user-listing] [data-test-mode] [data-layout-markers-controls] [data-layout-markers-toggle][data-active]:before{background-color:#87cefa}:host [data-vamtiger-user-listing] [data-test-mode] [data-layout-markers-controls] [data-layout-markers-toggle][data-active]:after{left:25px}:host [data-vamtiger-user-listing] [data-header]{display:grid;grid-template-rows:1fr;position:relative}:host [data-vamtiger-user-listing] [data-header]>*{grid-column:1;grid-row:1;width:100%;max-height:100%}:host [data-vamtiger-user-listing] [data-header] [data-header-overlay]{background-color:rgba(0,0,0,.3);z-index:2}:host [data-vamtiger-user-listing] [data-header] [data-header-image]{z-index:1;-o-object-fit:cover;object-fit:cover;position:relative}:host [data-vamtiger-user-listing] [data-header] [data-header-caption]{display:grid;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:3;color:#fff;font-size:2em}:host [data-vamtiger-user-listing] [data-body]{display:grid;grid-template-columns:1fr 3fr 1fr}:host [data-vamtiger-user-listing] [data-body] [data-user-listing]{display:grid;grid-template-rows:50px auto;grid-gap:1em;position:relative}:host [data-vamtiger-user-listing] [data-body] [data-user-listing] [data-action]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;position:-webkit-sticky;position:sticky;top:0;z-index:2;background-color:#fff}:host [data-vamtiger-user-listing] [data-body] [data-user-listing] [data-users]{display:grid;grid-auto-rows:3em;z-index:1}:host [data-vamtiger-user-listing] [data-overlay]{overflow:auto;position:fixed;height:100vh;width:100vw;display:grid;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:3;background:radial-gradient(rgba(0,0,0,.6),#000)}:host [data-vamtiger-user-listing] [data-overlay],:host [data-vamtiger-user-listing] [data-overlay] [data-confirm-delete-user]{visibility:hidden}:host [data-vamtiger-user-listing] [data-overlay][data-confirm]{-webkit-animation:a 135ms linear forwards;animation:a 135ms linear forwards}:host [data-vamtiger-user-listing] [data-footer]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#000;color:#fff;font-weight:1em}:host [data-vamtiger-user-listing] [data-footer] a{color:#fff;cursor:pointer}:host [data-vamtiger-user-listing] [data-footer] [data-separator]{margin:0 .5em;height:50%;width:1px;background-color:#fff}::slotted([slot=action]),[data-action] button{width:8em;display:grid;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;color:#fff;background-color:#000}::slotted([slot=footer]),::slotted([slot=header-image]){width:100%;max-height:100%;position:relative}::slotted([slot=header-image]){-o-object-fit:cover;object-fit:cover}::slotted([slot=user]){display:grid;grid-template-columns:repeat(2,1fr) minmax(auto,4fr);-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:1em;padding-left:1em}::slotted([slot=overlay]){display:grid;grid-row-gap:1em;padding:2em;background-color:#fff}\n\n/* Layout markers */:host [data-vamtiger-user-listing][data-test-mode] [data-test-mode]{visibility:visible}:host [data-vamtiger-user-listing][data-layout-markers]{background-color:#a9a9a9}:host [data-vamtiger-user-listing][data-layout-markers] [data-test-mode]~:nth-child(odd){background-color:#add8e6}:host [data-vamtiger-user-listing][data-layout-markers] [data-body]>:nth-child(odd){background-color:#ffb6c1}:host [data-vamtiger-user-listing][data-layout-markers] [data-user-listing]>:nth-child(odd){background-color:#90ee90}:host [data-vamtiger-user-listing][data-layout-markers] [data-user-listing]>:nth-child(2n){background-color:#fafad2}:host [data-vamtiger-user-listing][data-layout-markers] [data-action]{background-color:#add8e6}\n/*# sourceMappingURL=index.ts.map */`;","import {\n    IGetTemplate,\n    GetTemplate,\n    StringConstant,\n    AttributesKey\n} from './types';\nimport html from './html';\nimport css from './css';\n\nconst { nothing } = StringConstant;\nconst template = document.createElement('template');\nconst stylesheet = `<style>${css}</style>`\nconst templateHtml = [\n    stylesheet,\n    html\n].join(nothing);\n\ntemplate.innerHTML = templateHtml;\n\nexport default <P extends IGetTemplate>(params: P) => {\n    const {\n        selector,\n        attributes = {},\n        properties = {}\n    } = params;\n    const attributesKeys = Object.keys(attributes) as AttributesKey[]\n    const templateElement = template.content.querySelector(selector);\n    const currentTemplate = templateElement && templateElement.cloneNode(true) as GetTemplate<P>;\n\n    if (currentTemplate) {\n        Object.assign(currentTemplate, properties);\n\n        attributesKeys.forEach(key => attributes[key] && currentTemplate.setAttribute(key, attributes[key] || ''));\n    }\n\n    return currentTemplate;\n};","import {\n    ObservedAttributes,\n    ObservedAttribute,\n    EventName\n} from './types'\n\nexport const shadowRoot = {\n    mode: 'open'\n} as ShadowRootInit;\n\nexport const observedAttributes = Object.keys(ObservedAttributes) as ObservedAttribute[];\n\nexport const eventParams = {\n    bubbles: true\n};\n\nexport const customEvent = {\n    [EventName.connected]: new CustomEvent(EventName.connected, {\n        ...eventParams\n    })\n}\n\nexport const idleTimeout = 1;\n\nexport const observer = {\n    childList: true\n};\n\nexport const footerObserver = {\n    attributes: true\n};\n\nexport const clickEventName = document.ontouchstart ? 'touchstart' : 'click';\n\nexport const dependencies = [\n    {\n        name: 'font-awesome',\n        href: 'https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css'\n    }\n]","import { ICloseConfirmation, IUserRegistryElement, Selector  } from './types';\n\nexport default function ({element} : ICloseConfirmation) {\n    const { shadowRoot } = element;\n    const dataset: IUserRegistryElement['dataset'] = element.dataset;\n    const overlay = shadowRoot?.querySelector<HTMLElement>(Selector.overlay);\n    const overlayDataset: IUserRegistryElement['dataset'] | undefined = overlay?.dataset;\n\n    if (overlayDataset) {\n        delete dataset.confirm;\n        delete overlayDataset.confirm;\n    }\n}","import {\n    IUserRegistryElement,\n    IDeleteUser,\n    IDeleteUserResponse,\n    Selector,\n    RequestMethod\n} from './types';\nimport closeConfirmation from './close-confirmation';\n\nexport default async function ({element}: IDeleteUser) {\n    const { params, deleteUserElement: userElement } = element;\n    const { deleteUserUrl } = params;\n    const user = userElement && element.user.get(userElement);\n    const url = user?.id && `${deleteUserUrl}/${user.id}`;\n    const requestParams = {\n        method: RequestMethod.DELETE\n    }\n\n    let response: IDeleteUserResponse;\n\n    if (url) {\n        try {\n            response = await fetch(url, requestParams)\n                .then(response => response.json());\n\n            if (response.result === 'successful' && userElement) {\n                element.deleteUserElement = undefined;\n\n                element.user.delete(userElement);\n\n                userElement.parentElement?.removeChild(userElement);\n\n                closeConfirmation({element});\n            }\n        } catch(error) {\n            console.error('Delete Usesr error');\n            console.error(error);\n        }\n    }\n}\n\nexport function confirm({element, userElement}: IDeleteUser) {\n    const { shadowRoot } = element;\n    const dataset: IUserRegistryElement['dataset'] = element.dataset;\n    const overlay = shadowRoot?.querySelector<HTMLElement>(Selector.overlay);\n    const overlayDataset: IUserRegistryElement['dataset'] | undefined = overlay?.dataset;\n\n    if (overlayDataset) {\n        dataset.confirm = 'Delete user';\n        overlayDataset.confirm = dataset.confirm;\n        element.deleteUserElement = userElement;\n    }\n}","import {\n    IHandleUser,\n    Selector,\n    SlotName,\n    EventName\n} from './types';\nimport {\n    eventParams\n} from './config';\nimport { idleTimeout, clickEventName } from './config';\nimport getTemplate from './get-template';\nimport { confirm as confirmDelete } from './delete-user';\n\nconst { requestIdleCallback } = self;\n\nexport default function (params: IHandleUser) {\n    const { element } = params;\n\n    if (!element.user) {\n        element.user = new Map();\n    }\n\n    if (requestIdleCallback) {\n        requestIdleCallback(() => handleUser(params));\n    } else {\n        setTimeout(() => handleUser(params), idleTimeout);\n    }\n}\n\nfunction handleUser({element, user}: IHandleUser) {\n    const { name, surname, email } = user;\n    const ignore = element.user && Array\n        .from(element.user.values())\n        .some(({id}) => id === user.id);\n    const userTemplate = !ignore && [\n        `<span data-name>${name}</span>`,\n        `<span data-surname>${surname}</span>`,\n        `<span data-email>${email}</span>`,\n        '<span data-delete class=\"fa fa-trash\" aria-hidden=\"true\"></delete>'\n    ].join('');\n    const userElement = userTemplate  && getTemplate({\n        selector: Selector.user,\n        properties: {\n            innerHTML: userTemplate\n        },\n        attributes: {\n            slot: SlotName.user\n        }\n    });\n\n    if (userElement) {\n        element.user.set(userElement, user);\n\n        element.appendChild(userElement);\n\n        element.dispatchEvent(new CustomEvent(\n            EventName.userAdded,\n            {\n                ...eventParams,\n                detail: {user}\n            }\n        ));\n\n        userElement.addEventListener('mouseenter', () => userElement.dataset.hover = '');\n        userElement.addEventListener('mouseleave', () => delete userElement.dataset.hover);\n        userElement.addEventListener(clickEventName, () => confirmDelete({element, userElement}));\n    }\n}","import {\n    IGetUsers,\n    IUsersResponse,\n    IUserRegistryElement,\n    Selector\n} from './types';\nimport handleUser from './handle-user';\n\nconst { VamtigerBrowserMethod } = self;\nconst { pause, intersectionObserver } = VamtigerBrowserMethod;\n\nexport default async function getUsers({ element }: IGetUsers) {\n    const { params, user, shadowRoot, footerObserver, requestUrls } = element;\n    const dataset: IUserRegistryElement['dataset'] = element.dataset;\n    const {\n        getUsersUrl = '',\n        getUsersNextPageUrl = '',\n        getAllUsers,\n        handleUserTimeout\n    } = params;\n    const footer = shadowRoot?.querySelector<HTMLElement>(Selector.footer);\n    const url = user.size ? getUsersNextPageUrl : getUsersUrl;\n\n    let usersResponse: IUsersResponse;\n    let currentUsers: IUsersResponse['data']['users']['data'];\n    let footerVisible = 0;\n\n    if (!requestUrls.has(url)) {\n        requestUrls.add(url);\n\n        try {\n            usersResponse = url && await fetch(url)\n                .then(response => response.json());\n\n            currentUsers = usersResponse?.data?.users?.data || [];\n            params.getUsersNextPageUrl = usersResponse?.data?.users?.next_page_url || '';\n\n            for (const user of currentUsers) {\n                await handleUser({\n                    element,\n                    user\n                });\n            }\n\n            let footerVisible = Number(footer?.dataset?.visible || 0);\n\n            if (getAllUsers || footerVisible) {\n                await getUsers({element});\n            }\n\n            if (!url && footer) {\n                footerObserver?.disconnect();\n                intersectionObserver?.unobserve(footer);\n            }\n        } catch (error) {\n            dataset.getUsersError = '';\n        }\n    }\n}","import {\n    IHandleFooter,\n    Selector\n} from './types';\nimport getUsers from './get-users';\n\nexport default async function ({element, mutationLisit, observer}: IHandleFooter) {\n    const { shadowRoot, params } = element;\n    const { getUsersNextPageUrl } = params;\n    const footer = shadowRoot?.querySelector<HTMLElement>(Selector.footer);\n    const footerVisible = Number(footer?.dataset?.visible || 0);\n\n    if (getUsersNextPageUrl && footerVisible) {\n        await getUsers({element});\n    }\n}","import {\n    IGetUser,\n    GetNewUserResponse\n} from './types';\nimport handleUser from './handle-user';\nimport closeConfirmation from './close-confirmation'\n\nexport default async function ({ element,  userId }: IGetUser) {\n    const { params } = element;\n    const { getUserUrl } = params;\n    const url = getUserUrl && `${getUserUrl}/${userId}`;\n\n    let response: GetNewUserResponse;\n\n    if (url) {\n        try {\n            response = await fetch(url)\n                .then(response => response.json());\n\n            if (response.result === 'successful') {\n                closeConfirmation({ element });\n\n                await handleUser({\n                    element,\n                    user: response.data.user\n                });\n            }\n        } catch(error) {\n            console.error('Error getting user');\n            console.error(error);\n        }\n    }\n}","import {\n    IAddNewUser,\n    IUserRegistryElement,\n    IAddNewUserFailedResponse,\n    Selector,\n    RequestMethod,\n    AddNewUserResponse\n} from './types';\nimport getUser from './get-user';\n\nexport default async function ({element}: IAddNewUser) {\n    const { params } = element;\n    const { addNewUserUrl: url } = params;\n    const form = element.querySelector<HTMLFormElement>(Selector.addNewUserForm);\n    const formData = form && new FormData(form);\n    const requestParams = {\n        method: RequestMethod.POST,\n        body: formData\n    };\n\n    let response: AddNewUserResponse;\n\n    if (url) {\n        try {\n            response = await fetch(url, requestParams)\n                .then(response => response.json());\n\n            if (response.result === 'successful') {\n                await getUser({\n                    element,\n                    userId: response.data.user\n                });\n\n                form?.reset();\n            } else {\n                handleFailure({element, response});\n            }\n        } catch(error) {\n            console.error('Error Adding New User');\n            console.error(error);\n        }\n    }\n}\n\nexport function confirm({element}: IAddNewUser) {\n    const { shadowRoot } = element;\n    const dataset: IUserRegistryElement['dataset'] = element.dataset;\n    const overlay = shadowRoot?.querySelector<HTMLElement>(Selector.overlay);\n    const overlayDataset: IUserRegistryElement['dataset'] | undefined = overlay?.dataset;\n\n    if (overlayDataset) {\n        dataset.confirm = 'Add new user';\n        overlayDataset.confirm = dataset.confirm;\n    }\n}\n\nexport function handleFailure({ element, response }: IAddNewUser & {response: IAddNewUserFailedResponse}) {\n    const form = element.querySelector<HTMLFormElement>(Selector.addNewUserForm);\n    const errorElements = form && new Set(Array.from(form.querySelectorAll<HTMLElement>(Selector.addNewUserFormInputError)) ||  []);\n\n    let selector: string;\n    let errorSelector: string;\n    let error: string;\n    let input: HTMLInputElement | null;\n    let inputData: IUserRegistryElement['dataset'] | undefined;;\n    let inputError: HTMLElement | null;\n    let inputErrorData: IUserRegistryElement['dataset'] | undefined;\n\n    if (form) for (const field in response.data) {\n        selector = `input[name=\"${field.split('.').pop() || ''}\"]`;\n        errorSelector = `${selector} ~ ${Selector.addNewUserFormError}`;\n        error = response.data[field][0].errorDescription\n            || response.data[field][0].error\n            || '';\n        input = form.querySelector(selector)\n        inputError = form?.querySelector(errorSelector) || null;\n        inputData = input?.dataset;\n        inputErrorData = inputError?.dataset;\n\n        if (inputData && inputErrorData) {\n            inputData.error = '';\n            inputErrorData.error = inputErrorData.defaultErrorMessage || error;\n\n            input && errorElements?.delete(input);\n        }\n    }\n\n    errorElements && Array.from(errorElements).forEach(errorElement => delete errorElement.dataset.error);\n}","import {\n    IHandleEvent\n} from './types';\nimport handleUser from './handle-user';\n\nexport default function ({element, event}: IHandleEvent) {\n    const { detail } = event;\n    const user = detail?.user;\n\n    user && handleUser({element, user});\n}","import {\n    IUserRegistryElement,\n    IParams,\n    IUser,\n    Selector,\n    ObservedAttribute,\n    EventName,\n    IAddUserEventMessage\n} from './types';\nimport css from './css/document-index';\nimport getTemplate from './get-template';\nimport {\n    shadowRoot as shadowRootConfig,\n    observedAttributes,\n    footerObserver as footerObserverConfig,\n    observer as observerConfig,\n    clickEventName,\n    dependencies,\n    customEvent\n} from './config';\nimport getUsers from './get-users';\nimport handleFooter from './handle-footer';\nimport closeConfirmation from './close-confirmation';\nimport deleteUser from './delete-user';\nimport addNewUser, { confirm as addNewUserConfirm } from './add-new-user';\nimport handleEvent from './handle-event';\n\nconst { VamtigerBrowserMethod } = self;\nconst { loadScript, intersectionObserver } = VamtigerBrowserMethod;\n\nexport const name = 'vamtiger-user-registry';\n\ncss && Promise\n    .all([...dependencies, { name, css }].map(loadScript))\n    .catch(console.error);\n\nexport default class VamtigerUserRegistry extends HTMLElement implements IUserRegistryElement {\n    readonly params: IParams;\n    readonly user = new Map<HTMLElement, IUser>();\n    deleteUserElement?: HTMLElement;\n    requestUrls = new Set<string>();\n    footerObserver?: MutationObserver;\n\n    constructor() {\n        super();\n\n        const shadowRoot = this.attachShadow(shadowRootConfig);\n        const stylesheet = getTemplate({\n            selector: Selector.style\n        });\n        const ui = getTemplate({\n            selector: Selector.shadowUi\n        });\n        const elements = [\n            stylesheet,\n            ui\n        ];\n        const dataset: IUserRegistryElement['dataset'] = this.dataset;\n        const uiDatatset: IUserRegistryElement['dataset'] | undefined = ui?.dataset;\n        const {\n            getUsersUrl = '',\n            getUserUrl = '',\n            deleteUserUrl = '',\n            handleUserTimeout = 0,\n            addNewUserUrl = ''\n        } = dataset;\n\n        this.params = {\n            layoutMarkers: dataset.hasOwnProperty('layoutMarkers'),\n            testMode: dataset.hasOwnProperty('testMode'),\n            addNewUserUrl,\n            getUsersUrl,\n            getUserUrl,\n            deleteUserUrl,\n            handleUserTimeout: Number(handleUserTimeout),\n            getAllUsers: dataset.hasOwnProperty('getAllUsers') || !intersectionObserver\n        };\n\n        if (this.params.layoutMarkers && uiDatatset) {\n            uiDatatset.layoutMarkers = '';\n        }\n\n        if (this.params.testMode && uiDatatset) {\n            uiDatatset.testMode = '';\n        }\n\n        elements.forEach(element => element && shadowRoot.appendChild(element));\n    }\n\n    static get observedAttributes() {\n        return observedAttributes;\n    }\n\n    async connectedCallback() {\n        const element = this;\n        const { shadowRoot, params } = element;\n        const { testMode, layoutMarkers } = params;\n        const shadowUi = shadowRoot?.querySelector<HTMLElement>(Selector.shadowUi);\n        const layoutMarkersToggle = shadowRoot?.querySelector<HTMLElement>(Selector.layoutMarkersToggle);\n        const addNewUserButton = !element.querySelector<HTMLButtonElement>(Selector.addNewUserButton) && getTemplate({\n            selector: Selector.addNewUserButton\n        });\n        const confirmDeleteDialog = getTemplate({\n            selector: Selector.confirmDeleteDialog\n        });\n        const confirmAddNewUserDialog = getTemplate({\n            selector: Selector.confirmAddNewUserDialog\n        });\n        const confirmDeleteButton = confirmDeleteDialog\n            ?.querySelector<HTMLElement>(Selector.confirmButtonOkay)\n        const confirmAddNewUserButton = confirmAddNewUserDialog\n            ?.querySelector<HTMLElement>(Selector.confirmButtonOkay)\n        const elements = [\n            addNewUserButton,\n            confirmDeleteDialog,\n            confirmAddNewUserDialog\n        ];\n        const closeConfirmationElements = [\n            confirmDeleteDialog?.querySelector<HTMLElement>(Selector.cancelDialog),\n            confirmAddNewUserDialog?.querySelector<HTMLElement>(Selector.cancelDialog)\n        ];\n        const footer = shadowRoot?.querySelector<HTMLElement>(Selector.footer);\n        const dataset: IUserRegistryElement['dataset'] = this.dataset;\n\n        elements.forEach(currentElement => currentElement && element.appendChild(currentElement));\n\n        closeConfirmationElements.forEach(currentElement => currentElement && currentElement\n            .addEventListener(clickEventName, () => closeConfirmation({element})));\n\n        if (addNewUserButton) {\n            addNewUserButton.addEventListener(clickEventName, () => addNewUserConfirm({element}));\n        }\n\n        if (confirmDeleteButton) {\n            confirmDeleteButton.addEventListener(clickEventName, () => deleteUser({element}));\n        }\n\n        if (confirmAddNewUserButton) {\n            confirmAddNewUserButton.addEventListener(clickEventName, () => addNewUser({element}));\n        }\n\n        if (footer && intersectionObserver) {\n            this.footerObserver = new MutationObserver((mutationLisit, observer) => handleFooter({\n                element,\n                mutationLisit,\n                observer\n            }));\n\n            this.footerObserver.observe(footer, footerObserverConfig);\n            intersectionObserver.observe(footer);\n        } else {\n            dataset.getAllUsers = '';\n        }\n\n        if (testMode || layoutMarkers) {\n            layoutMarkersToggle?.addEventListener(clickEventName, () => {\n                if (shadowUi) {\n                    shadowUi.dataset.layoutMarkers = '';\n\n                    if (layoutMarkersToggle.dataset.hasOwnProperty('active')) {\n                        delete layoutMarkersToggle.dataset.active;\n                        delete element.dataset.layoutMarkers;\n                        delete shadowUi?.dataset.layoutMarkers;\n                    } else {\n                        layoutMarkersToggle.dataset.active = '';\n                        element.dataset.layoutMarkers = '';\n                    }\n                }\n            })\n        }\n\n        await getUsers({ element });\n\n        dataset.connected = '';\n\n        element.addEventListener(\n            EventName.addUser,\n            (event: CustomEventInit<IAddUserEventMessage>) => handleEvent({element, event}));\n\n        element.dispatchEvent(customEvent[\"vamtiger-user-registry-connected\"]);\n    }\n\n    attributeChangedCallback(name: ObservedAttribute, oldValue: string, newValue: string) {\n\n    }\n}","import constructor, { name } from './element';\n\nconst { VamtigerBrowserMethod } = self;\nconst { defineCustomElement } = VamtigerBrowserMethod;\n\ndefineCustomElement({\n    name,\n    constructor\n});"],"names":["css","handleUser","confirmDelete","confirm","VamtigerBrowserMethod","intersectionObserver","shadowRoot","shadowRootConfig","addNewUserConfirm","observer","footerObserverConfig","constructor"],"mappings":"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"}